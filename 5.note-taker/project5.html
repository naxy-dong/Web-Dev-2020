<!DOCTYPE HTML>
<html>
	<head>
		<title>Interactive History</title>
		<style>
			h1
			{
				text-align:center;
				text-decoration:underline;
			}
			
			.text
			{
				margin-left: 5%;
				margin-right:5%;
				text-align:justify;
				text-indent: 50px;
				font-size:20px;
			}
			
			li
			{
				text-indent: 20px;
			}
			
			textarea
			{
				width:100%;
				height:100px;
				border-radius:4px;
			}
			
			.inputNumber
			{
				width:50px;
			}
			
			.SubTopicBtn
			{
				margin-left:50px;
				background-color:#EEEEEE;
				border:thin solid black;
			}
			
			div
			{
				border:thin solid black;
				border-radius:10px;
				background-color:#F2F2F2;
				padding:10px;
			}
			
			.InstructionBtn
			{
				padding:5px;
			}
			
			.instructions
			{
				border:thin solid black;
				background-color:lightblue;
				border-left:thick solid blue;
				border-radius:10px;
				padding:10px;	
			}
			
			table
			{
				width:100%;
			}
			
			td
			{
				vertical-align:text-top;
			}
			
			td#Content
			{
				width:70%;
				background-color:#dddddd;
			}
			
			td#Annotation
			{
				border:medium solid black;
			}
			
		</style>
		<script>
			function initialize()
			{
				SubTopic1Output=document.getElementById("SubTopic1");
				SubTopic1Button=document.getElementById("SubTopic1Btn");
				SubTopic1Output.innerHTML="";
				SubTopic1Expand=false;
				
				SubTopic2Output=document.getElementById("SubTopic2");
				SubTopic2Button=document.getElementById("SubTopic2Btn");
				SubTopic2Output.innerHTML="";
				SubTopic2Expand=false;
				
				SubTopic3Output=document.getElementById("SubTopic3");
				SubTopic3Button=document.getElementById("SubTopic3Btn");
				SubTopic3Output.innerHTML="";
				SubTopic3Expand=false;
				
				Annotation=document.getElementById("AnnoList");
				AnnotationForm=document.getElementById("AnnoForm");
				AnnotationList=[];
			}

			function ExpandTexts(mod)
			{
				if(mod==1)//First SubTopic
				{
					if(SubTopic1Expand==false)
					{
						SubTopic1Output.innerHTML="<p>At the behest of Joseph Cogswell, John Jacob Astor placed a codicil in his will to bequeath $400,000"+
						"(equivalent of $11.8 million in 2019) for the creation of a public library. After Astor's death in 1848, the resulting board of"+
						"trustees executed the will's conditions and constructed the Astor Library in 1854 in the East Village."+
						" The library created was a free reference library; its books were not permitted to circulate.</p>"+
						
						"<p>Former Governor of New York and presidential candidate Samuel J. Tilden believed that a library with citywide reach was required,"+
						"and upon his death in 1886, he bequeathed the bulk of his fortune—about $2.4 million (equivalent of $68 million in 2019)—to "+
						'"establish and maintain a free library and reading room in the city of New York".'+
						"This money would sit untouched in a trust for several years, until John Bigelow, a New York attorney, and Andrew Haswell Green,"+
						"both trustees of the Tilden fortune, came up with an idea to merge two of the city's largest libraries.</p>"+
						
						"<p>Both the Astor and Lenox libraries were struggling financially. Although New York City already had numerous libraries in the 19th century,"+
						"almost all of them were privately funded and many charged admission or usage fees. Bigelow, the most prominent supporter of the plan to merge"+
						"the libraries found support in Lewis Cass Ledyard, a member of the Tilden Board, as well as John Cadwalader, on the Astor board."+
						"Eventually, John Stewart Kennedy, president of the Lenox board came to support the plan as well."+
						"On May 23, 1895, Bigelow, Cadwalader, and George L. Rives agreed to create"+'"The New York Public Library, Astor, Lenox and Tilden Foundations"'+
						"The plan was hailed as an example of private philanthropy for the public good.[13] On December 11, John Shaw Billings was named as the library's first director. "+
						"The newly established library consolidated with the grass-roots New York Free Circulating Library in February 1901.</p>"+
						
						"<p>In March, Andrew Carnegie tentatively agreed to donate $5.2 million (equivalent of $160 million in 2019) to construct sixty-five branch libraries in the city,"+
						" with the requirement that they be operated and maintained by the City of New York. The Brooklyn and Queens public library systems"+ 
						"which predated the consolidation of New York City, eschewed the grants offered to them and did not join the NYPL system; they believed that they would not get"+
						"treatment equal to the Manhattan and the Bronx counterparts. Later in 1901, Carnegie formally signed a contract with the City of New York to transfer his donation"+
						"to the city in order to enable it to justify purchasing the land for building the branch libraries. The NYPL Board of trustees hired consultants for the planning,"+
						"and accepted their recommendation that a limited number of architectural firms be hired to build the Carnegie libraries: this would ensure uniformity "+
						"of appearance and minimize cost. The trustees hired McKim, Mead & White, Carrère and Hastings, and Walter Cook to design all the branch libraries.</p>";
						
						SubTopic1Button.innerHTML="<h3>- Construction and Founding</h3>";
						SubTopic1Expand=true;
						SubTopic1Button.style.backgroundColor="#00bb00";
						SubTopic1Button.style.color="white";
					}
					else
					{
						SubTopic1Output.innerHTML="";
						SubTopic1Button.innerHTML="<h3>+ Construction and Founding</h3>";
						SubTopic1Expand=false;
						SubTopic1Button.style.backgroundColor="#EEEEEE";
						SubTopic1Button.style.color="black";
					}
				}
				if(mod==2)//Second SubTopic
				{
					if(SubTopic2Expand==false)
					{
						SubTopic2Output.innerHTML="<p>The consolidations and changes in collections have promoted continuing debate and controversy since 2004 when David Ferriero "+
						"was named the Andrew W. Mellon Director and Chief Executive of the Research Libraries.NYPL had engaged consultants Booz Allen Hamilton to survey the institution,"+
						" and Ferriero endorsed the survey's report as a big step " +'"in the process of reinventing the library"'+" The consolidation program has resulted in the elimination"+
						" of subjects such as the Asian and Middle East Division (formerly named Oriental Division), as well as the Slavic and Baltic Division.</p>"+
						
						"<p>A number of innovations in recent years have been criticized. In 2004 NYPL announced participation in the Google Books Library Project."+
				 		" By agreement between Google and major international libraries, selected collections of public domain books would be scanned in their entirety "+
						"and made available online for free to the public. The negotiations between the two partners called for each to project guesses about ways that"+
						" libraries are likely to expand in the future. According to the terms of the agreement, the data cannot be crawled or harvested by any other search engine;"+
						" no downloading or redistribution is allowed. The partners and a wider community of research libraries can share the content.</p>"+
						
						"<p>The sale of the separately endowed former Donnell Library in midtown provoked controversy.The elimination of Donnell was a result of the dissolution of children's, "+
						"young adult and foreign language collections. The Donnell Media Center was also dismantled, the bulk of its collection relocated at the New York Public Library"+
						" for the Performing Arts as the Reserve Film and Video Collection, with parts of its collection redistributed. The site was redeveloped for a luxury hotel.</p>";
						SubTopic2Button.innerHTML="<h3>- Controversies</h3>";
						SubTopic2Expand=true;
						SubTopic2Button.style.backgroundColor="#00bb00";
						SubTopic2Button.style.color="white";
					}
					else
					{
						SubTopic2Output.innerHTML="";
						SubTopic2Button.innerHTML="<h3>+ Controversies</h3>";
						SubTopic2Expand=false;
						SubTopic2Button.style.backgroundColor="#EEEEEE";
						SubTopic2Button.style.color="black";
					}
				}
				if(mod==3)//Third SubTopic
				{
					if(SubTopic3Expand==false)
					{
						SubTopic3Output.innerHTML="<p>The New York Public Library was not created by government statute. From its earliest days, the library was formed from a partnership "+
						"of city government with private philanthropy. As of 2010, the research libraries in the system are largely funded with private money, "+
						"and the branch or circulating libraries are financed primarily with city government funds. Until 2009, the research and branch libraries"+
						" operated almost entirely as separate systems, but that year various operations were merged. By early 2010, the NYPL staff had been reduced by about 16 percent, "+ 
						"in part through the consolidations.</p>"+
						
						"<p>In 2010, as part of the consolidation program, the NYPL moved various back-office operations to a new Library Services Center building in Long Island City. "+
						"A former warehouse was renovated for this purpose for $50 million. In the basement, a new, $2.3 million book sorter uses bar codes on library items to sort them "+
						"for delivery to 132 branch libraries. At two-thirds the length of a football field, the machine is the largest of its kind in the world, according to library officials."+
						" Books located in one branch and requested from another go through the sorter, which use has cut the previous waiting time by at least a day."+
						" Together with 14 library employees, the machine can sort 7,500 items an hour (or 125 a minute). On the first floor of the Library Services Center is an ordering "+
						"and cataloging office; on the second, the digital imaging department (formerly at the Main Branch building) and the manuscripts and archives division,"+
						" where the air is kept cooler; on the third, the Barbara Goldsmith Preservation Division, with a staff of 10 (as of 2010) but designed for as many as 30 employees.</p>"+
						
						"<p>The NYPL maintains a force of NYC special patrolmen, who provide security and protection to various libraries, and NYPL special investigators, "+
						"who oversee security operations at the library facilities. These officials have on-duty arrest authority granted by the New York Penal Law. "+ 
						"Some library branches contract for security guards.To celebrate its 125th anniversary, the NYPL calculated a list of its most checked out books. "+ 
						"Topping the list was Ezra Jack Keats' The Snowy Day, with The Cat in the Hat and Nineteen Eighty-Four rounding out the top three.</p>"
						SubTopic3Button.innerHTML="<h3>- Recent History</h3>";
						SubTopic3Expand=true;
						SubTopic3Button.style.backgroundColor="#00bb00";
						SubTopic3Button.style.color="white";
					}
					else
					{
						SubTopic3Output.innerHTML="";
						SubTopic3Button.innerHTML="<h3>+ Recent History</h3>";
						SubTopic3Expand=false;
						SubTopic3Button.style.backgroundColor="#EEEEEE";
						SubTopic3Button.style.color="black";
					}
				}
			}
			
			function SelectTexts()
			{
				SelectedText=window.getSelection()+"<br />";
			}
			
			function AddAnnotation()
			{
				if(SelectedText !== " " && SelectedText !== "")// To ensure that the user didn't select nothing
				{
					AnnotationList.push([SelectedText]);
				}
				else
				{
					alert("Please selected a text");
				}
				
				display();
			}
			
			function DeleteAnnotation() //possible improvements: instead of deleting one by one, the user could use a range (ex: 2-7), or select multiple specific annotations (ex: 2,3,6,7)
			{
				Annoidx = AnnotationForm.Annoindex.value;
				if(Annoidx > AnnotationList.length || Annoidx <= 0)//Checks if Annoidx is within the Annotation list.
				{
					alert("invalid annotation index");
				}
				else
				{
					AnnotationList.splice(Annoidx-1,1);
					display();
				}
			}
			
			function AddNote()
			{
				Annoidx = AnnotationForm.Annoindex.value;
				NoteContent = AnnotationForm.Note.value;
				
				if(Annoidx > AnnotationList.length || Annoidx <= 0)//Checks if Annoidx is within the Annotation list.
				{
					alert("invalid annotation index");
				}
				else
				{
					AnnotationList[Annoidx-1].push(NoteContent);
					display();
				}
			}
			
			function EditNote()
			{
				Noteidx = AnnotationForm.Noteindex.value;
				Annoidx = AnnotationForm.Annoindex.value;
				NoteContent = AnnotationForm.Note.value;
				
				if(Noteidx >= AnnotationList[Annoidx-1].length || Noteidx <= 0)//Checks if Noteidx is within the Note list.
				{
					alert("invalid note index");
				}
				if(Annoidx > AnnotationList.length || Annoidx <= 0)//Checks if Annoidx is within the Annotation list.
				{
					alert("invalid annotation index");
				}
				else
				{
					AnnotationList[Annoidx-1][Noteidx] = NoteContent;
					display();
				}
			}
			
			function DeleteNote()
			{
				Annoidx = AnnotationForm.Annoindex.value;
				Noteidx = AnnotationForm.Noteindex.value;
				
				if(Annoidx > AnnotationList.length || Annoidx <= 0)//Checks if Annoidx is within the Annotation list.
				{
					alert("invalid annotation index");
				}
				if(Noteidx >= AnnotationList[Annoidx-1].length || Noteidx <= 0)//Checks if Noteidx is within the Note list.
				{
					alert("invalid note index");
				}
				else
				{
					AnnotationList[Annoidx-1].splice(Noteidx,1);
					display();
				}
			}
			
			function display()
			{
				console.log(AnnotationList);
				Annotation.innerHTML="";
				for (i=0; i< AnnotationList.length; i++)
				{
					Annotation.innerHTML +=(i+1) +": " + AnnotationList[i][0]; //It display the annotations
					for (j=1; j<AnnotationList[i].length; j++)
					{
						Annotation.innerHTML+="<li>" + j +": " + AnnotationList[i][j] + "</li>" // It display the notes
					}
					Annotation.innerHTML += "<hr />";
				}
			}
		</script>
	</head>
	<body onload ="initialize();">
		<table>
			<tr>
				<td id = "Content">
					<h1>The history of New York Public Library</h1>
					<p class = "text" onclick = "SelectTexts();">
						The New York Public Library is the second largest public library in the United States (behind the Library of Congress)
						and the third largest in the world (behind the British Library).It is a private, non-governmental, independently managed,
						nonprofit corporation operating with both private and public financing. The library has branches in the boroughs of the Bronx, 
						Manhattan and Staten Island and affiliations with academic and professional libraries in the New York metropolitan area.
					</p>
					<p class = "text" onclick = "SelectTexts();">
						The library, officially chartered as The New York Public Library, Astor, Lenox and Tilden Foundations, was developed in the 19th century, 
						founded from an amalgamation of grass-roots libraries and social libraries of bibliophiles and the wealthy, 
						aided by the philanthropy of the wealthiest Americans of their age. The "New York Public Library" name may also refer to its Main Branch, 
						which is easily recognizable by its lion statues named Patience and Fortitude that sit either side of the entrance.
						The branch was declared a National Historic Landmark in 1965, listed on the National Register of Historic Places in 1966,
						and designated a New York City Landmark in 1967.
					</p>
					<br />
					<button onclick = "ExpandTexts(1);" class = "SubTopicBtn" id="SubTopic1Btn"><h3>+ Construction and Founding</h3></button>
						<p onclick = "SelectTexts();" class = "text" id="SubTopic1"></p>
					<button onclick = "ExpandTexts(2);" class = "SubTopicBtn" id="SubTopic2Btn"><h3>+ Controversies</h3></button>
						<p onclick = "SelectTexts();" class = "text" id="SubTopic2"></p>
					<button onclick = "ExpandTexts(3);" class = "SubTopicBtn" id="SubTopic3Btn"><h3>+ Recent History</h3></button>
						<p onclick = "SelectTexts();" class = "text" id="SubTopic3"></p>
				</td>
				
				<td id = "Annotation">
					<p class ="instructions"><u>Add Annotation</u>: Select the texts and click add annotation.</p>
					<p class ="instructions"><u>Delete Annotation</u>: Select an index from the annotation index and click delete annotation. If the annotation has notes, the notes will delete with it</p>
					<p class ="instructions"><u>Add Note</u>: Take notes on the text area and select the annotation index and click add note.</p>
					<p class ="instructions"><u>Edit Note</u>: Edit notes on the text area and select the index from both the annotation and the note and click edit note.</p>
					<p class ="instructions"><u>Delete Note</u>: Select the index from both the annotation and the note and click delete note.</p>
					
					<div>
						<form id = "AnnoForm">
							Annotation index:
							<input class = "inputNumber" type = "number" name = "Annoindex" />
							Note index:
							<input class = "inputNumber" type = "number" name = "Noteindex" />
							<textarea name = "Note">Notes:</textarea>
						</form>
					</div>
					
					<button class = "InstructionBtn" onclick = "AddAnnotation();">Add Annotation</button>
					<button class = "InstructionBtn" onclick = "DeleteAnnotation();">Delete Annotation</button>
					<br />
					<button class = "InstructionBtn" onclick = "AddNote();">Add Note</button>
					<button class = "InstructionBtn" onclick = "EditNote();">Edit Note</button>
					<button class = "InstructionBtn" onclick = "DeleteNote();">Delete Note</button>
					<hr />
					<p id="AnnoList"></p>
				</td>
			</tr>
		</table>
	</body>
</html>